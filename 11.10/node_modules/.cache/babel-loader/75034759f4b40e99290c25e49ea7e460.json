{"ast":null,"code":"import { isNullOrUndefined, append, createElement, isBlazor, addClass } from '@syncfusion/ej2-base';\nimport { updateBlazorTemplate, resetBlazorTemplate } from '@syncfusion/ej2-base';\nimport { Tooltip } from '@syncfusion/ej2-popups';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Tooltip for Schedule\n */\n\nvar EventTooltip =\n/** @class */\nfunction () {\n  function EventTooltip(parent) {\n    this.parent = parent;\n    this.tooltipObj = new Tooltip({\n      animation: {\n        close: {\n          effect: isBlazor() ? 'None' : 'FadeOut'\n        }\n      },\n      content: 'No title',\n      position: 'BottomRight',\n      offsetY: 10,\n      mouseTrail: this.parent.isAdaptive ? false : true,\n      showTipPointer: false,\n      cssClass: this.parent.cssClass + ' ' + cls.EVENT_TOOLTIP_ROOT_CLASS,\n      target: this.getTargets(),\n      beforeRender: this.onBeforeRender.bind(this),\n      enableRtl: this.parent.enableRtl,\n      beforeOpen: this.onBeforeOpen.bind(this),\n      beforeClose: this.onBeforeClose.bind(this)\n    });\n    this.tooltipObj.appendTo(this.parent.element);\n    this.tooltipObj.isStringTemplate = true;\n  }\n\n  EventTooltip.prototype.getTargets = function () {\n    var targets = [];\n\n    if (this.parent.activeViewOptions.group.headerTooltipTemplate) {\n      targets.push('.' + cls.RESOURCE_CELLS_CLASS);\n    }\n\n    if (this.parent.eventSettings.enableTooltip) {\n      targets.push('.' + cls.APPOINTMENT_CLASS);\n    }\n\n    return targets.join(',');\n  };\n\n  EventTooltip.prototype.onBeforeOpen = function () {\n    if (isBlazor() && this.parent.group.headerTooltipTemplate) {\n      var templateId = this.parent.element.id + '_headerTooltipTemplate';\n      updateBlazorTemplate(templateId, 'HeaderTooltipTemplate', this.parent.group);\n    }\n\n    if (isBlazor() && this.parent.eventSettings.tooltipTemplate) {\n      var templateId = this.parent.element.id + '_tooltipTemplate';\n      updateBlazorTemplate(templateId, 'TooltipTemplate', this.parent.eventSettings);\n    }\n  };\n\n  EventTooltip.prototype.onBeforeClose = function () {\n    if (isBlazor() && this.parent.group.headerTooltipTemplate) {\n      var templateId = this.parent.element.id + '_headerTooltipTemplate';\n      resetBlazorTemplate(templateId, 'HeaderTooltipTemplate');\n    }\n\n    if (isBlazor() && this.parent.eventSettings.tooltipTemplate) {\n      var templateId = this.parent.element.id + '_tooltipTemplate';\n      resetBlazorTemplate(templateId, 'TooltipTemplate');\n    }\n\n    this.parent.resetTemplates();\n  }; // tslint:disable-next-line:max-func-body-length\n\n\n  EventTooltip.prototype.onBeforeRender = function (args) {\n    if (!isNullOrUndefined(args.target.getAttribute('data-tooltip-id'))) {\n      return;\n    }\n\n    if (args.target.classList.contains(cls.RESOURCE_CELLS_CLASS) && this.parent.activeViewOptions.group.resources.length > 0) {\n      var resCollection = void 0;\n\n      if (this.parent.activeView.isTimelineView()) {\n        var index = parseInt(args.target.getAttribute('data-group-index'), 0);\n        resCollection = this.parent.resourceBase.lastResourceLevel[index];\n      } else {\n        var rowIndex = args.target.parentNode.sectionRowIndex;\n        var cellIndex = args.target.cellIndex;\n        resCollection = this.parent.activeView.getColumnLevels()[rowIndex][cellIndex];\n      }\n\n      var data = {\n        resource: resCollection.resource,\n        resourceData: resCollection.resourceData\n      };\n      var contentContainer = createElement('div');\n      var templateId = this.parent.element.id + '_headerTooltipTemplate';\n      var tooltipTemplate = [].slice.call(this.parent.getHeaderTooltipTemplate()(data, this.parent, 'headerTooltipTemplate', templateId, false));\n      append(tooltipTemplate, contentContainer);\n      this.setContent(contentContainer);\n      return;\n    }\n\n    var record = this.parent.eventBase.getEventByGuid(args.target.getAttribute('data-guid'));\n\n    if (!isNullOrUndefined(this.parent.eventSettings.tooltipTemplate)) {\n      var contentContainer = createElement('div');\n      var templateId = this.parent.element.id + '_tooltipTemplate';\n      var templateArgs = util.addLocalOffsetToEvent(record, this.parent.eventFields);\n      var tooltipTemplate = [].slice.call(this.parent.getEventTooltipTemplate()(templateArgs, this.parent, 'tooltipTemplate', templateId, false));\n      append(tooltipTemplate, contentContainer);\n      this.setContent(contentContainer);\n    } else {\n      var globalize = this.parent.globalize;\n      var fields = this.parent.eventFields;\n      var eventStart = new Date('' + record[fields.startTime]);\n      var eventEnd = new Date('' + record[fields.endTime]);\n      eventEnd = eventEnd.getHours() === 0 && eventEnd.getMinutes() === 0 ? new Date(eventEnd.setMilliseconds(-1000)) : eventEnd;\n      var startDate = util.resetTime(new Date('' + eventStart));\n      var endDate = util.resetTime(new Date('' + eventEnd));\n      var tooltipSubject = record[fields.subject] || this.parent.eventSettings.fields.subject.default;\n      var tooltipLocation = !isNullOrUndefined(record[fields.location]) ? record[fields.location] : '';\n      var startMonthDate = '';\n      var startMonthYearDate = '';\n      var endMonthYearDate = '';\n\n      if (isBlazor()) {\n        startMonthDate = globalize.formatDate(eventStart, {\n          type: 'date',\n          format: 'MMM d',\n          calendar: this.parent.getCalendarMode()\n        });\n        startMonthYearDate = globalize.formatDate(eventStart, {\n          type: 'date',\n          format: 'MMMM d, y',\n          calendar: this.parent.getCalendarMode()\n        });\n        endMonthYearDate = globalize.formatDate(eventEnd, {\n          type: 'date',\n          format: 'MMMM d, y',\n          calendar: this.parent.getCalendarMode()\n        });\n      } else {\n        startMonthDate = globalize.formatDate(eventStart, {\n          type: 'date',\n          skeleton: 'MMMd',\n          calendar: this.parent.getCalendarMode()\n        });\n        startMonthYearDate = globalize.formatDate(eventStart, {\n          type: 'date',\n          skeleton: 'medium',\n          calendar: this.parent.getCalendarMode()\n        });\n        endMonthYearDate = globalize.formatDate(eventEnd, {\n          type: 'date',\n          skeleton: 'medium',\n          calendar: this.parent.getCalendarMode()\n        });\n      }\n\n      startMonthDate = util.capitalizeFirstWord(startMonthDate, 'single');\n      startMonthYearDate = util.capitalizeFirstWord(startMonthYearDate, 'single');\n      endMonthYearDate = util.capitalizeFirstWord(endMonthYearDate, 'single');\n      var skeleton = isBlazor() ? 't' : 'short';\n      var startTime = globalize.formatDate(eventStart, {\n        type: 'time',\n        skeleton: skeleton,\n        calendar: this.parent.getCalendarMode()\n      });\n      var endTime = globalize.formatDate(eventEnd, {\n        type: 'time',\n        skeleton: skeleton,\n        calendar: this.parent.getCalendarMode()\n      });\n      var tooltipDetails = void 0;\n\n      if (startDate.getTime() === endDate.getTime()) {\n        tooltipDetails = isBlazor() ? globalize.formatDate(eventStart, {\n          type: 'date',\n          format: 'MMMM d, y',\n          calendar: this.parent.getCalendarMode()\n        }) : globalize.formatDate(eventStart, {\n          type: 'date',\n          skeleton: 'long',\n          calendar: this.parent.getCalendarMode()\n        });\n        tooltipDetails = util.capitalizeFirstWord(tooltipDetails, 'single');\n      } else {\n        tooltipDetails = startDate.getFullYear() === endDate.getFullYear() ? startMonthDate + ' - ' + endMonthYearDate : startMonthYearDate + ' - ' + endMonthYearDate;\n      }\n\n      var tooltipTime = record[fields.isAllDay] ? this.parent.localeObj.getConstant('allDay') : startTime + ' - ' + endTime;\n      var content = '<div><div class=\"e-subject\">' + tooltipSubject + '</div>' + '<div class=\"e-location\">' + tooltipLocation + '</div>' + '<div class=\"e-details\">' + tooltipDetails + '</div>' + '<div class=\"e-all-day\">' + tooltipTime + '</div></div>';\n      this.setContent(content);\n    }\n\n    this.parent.renderTemplates();\n  };\n\n  EventTooltip.prototype.setContent = function (content) {\n    this.tooltipObj.setProperties({\n      content: content\n    }, true);\n  };\n\n  EventTooltip.prototype.close = function () {\n    this.tooltipObj.close();\n  };\n  /**\n   * To destroy the event tooltip.\n   * @return {void}\n   * @private\n   */\n\n\n  EventTooltip.prototype.destroy = function () {\n    this.tooltipObj.destroy();\n    addClass([this.parent.element], 'e-control');\n    this.tooltipObj = null;\n  };\n\n  return EventTooltip;\n}();\n\nexport { EventTooltip };","map":{"version":3,"sources":["/Users/evanschubert/Documents/Coding/git/CMPS285-Fall2020-Section1-Group-6/11.5/node_modules/@syncfusion/ej2-schedule/src/schedule/popups/event-tooltip.js"],"names":["isNullOrUndefined","append","createElement","isBlazor","addClass","updateBlazorTemplate","resetBlazorTemplate","Tooltip","cls","util","EventTooltip","parent","tooltipObj","animation","close","effect","content","position","offsetY","mouseTrail","isAdaptive","showTipPointer","cssClass","EVENT_TOOLTIP_ROOT_CLASS","target","getTargets","beforeRender","onBeforeRender","bind","enableRtl","beforeOpen","onBeforeOpen","beforeClose","onBeforeClose","appendTo","element","isStringTemplate","prototype","targets","activeViewOptions","group","headerTooltipTemplate","push","RESOURCE_CELLS_CLASS","eventSettings","enableTooltip","APPOINTMENT_CLASS","join","templateId","id","tooltipTemplate","resetTemplates","args","getAttribute","classList","contains","resources","length","resCollection","activeView","isTimelineView","index","parseInt","resourceBase","lastResourceLevel","rowIndex","parentNode","sectionRowIndex","cellIndex","getColumnLevels","data","resource","resourceData","contentContainer","slice","call","getHeaderTooltipTemplate","setContent","record","eventBase","getEventByGuid","templateArgs","addLocalOffsetToEvent","eventFields","getEventTooltipTemplate","globalize","fields","eventStart","Date","startTime","eventEnd","endTime","getHours","getMinutes","setMilliseconds","startDate","resetTime","endDate","tooltipSubject","subject","default","tooltipLocation","location","startMonthDate","startMonthYearDate","endMonthYearDate","formatDate","type","format","calendar","getCalendarMode","skeleton","capitalizeFirstWord","tooltipDetails","getTime","getFullYear","tooltipTime","isAllDay","localeObj","getConstant","renderTemplates","setProperties","destroy"],"mappings":"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","sourcesContent":["import { isNullOrUndefined, append, createElement, isBlazor, addClass } from '@syncfusion/ej2-base';\nimport { updateBlazorTemplate, resetBlazorTemplate } from '@syncfusion/ej2-base';\nimport { Tooltip } from '@syncfusion/ej2-popups';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Tooltip for Schedule\n */\nvar EventTooltip = /** @class */ (function () {\n    function EventTooltip(parent) {\n        this.parent = parent;\n        this.tooltipObj = new Tooltip({\n            animation: { close: { effect: isBlazor() ? 'None' : 'FadeOut' } },\n            content: 'No title',\n            position: 'BottomRight',\n            offsetY: 10,\n            mouseTrail: this.parent.isAdaptive ? false : true,\n            showTipPointer: false,\n            cssClass: this.parent.cssClass + ' ' + cls.EVENT_TOOLTIP_ROOT_CLASS,\n            target: this.getTargets(),\n            beforeRender: this.onBeforeRender.bind(this),\n            enableRtl: this.parent.enableRtl,\n            beforeOpen: this.onBeforeOpen.bind(this),\n            beforeClose: this.onBeforeClose.bind(this)\n        });\n        this.tooltipObj.appendTo(this.parent.element);\n        this.tooltipObj.isStringTemplate = true;\n    }\n    EventTooltip.prototype.getTargets = function () {\n        var targets = [];\n        if (this.parent.activeViewOptions.group.headerTooltipTemplate) {\n            targets.push('.' + cls.RESOURCE_CELLS_CLASS);\n        }\n        if (this.parent.eventSettings.enableTooltip) {\n            targets.push('.' + cls.APPOINTMENT_CLASS);\n        }\n        return targets.join(',');\n    };\n    EventTooltip.prototype.onBeforeOpen = function () {\n        if (isBlazor() && this.parent.group.headerTooltipTemplate) {\n            var templateId = this.parent.element.id + '_headerTooltipTemplate';\n            updateBlazorTemplate(templateId, 'HeaderTooltipTemplate', this.parent.group);\n        }\n        if (isBlazor() && this.parent.eventSettings.tooltipTemplate) {\n            var templateId = this.parent.element.id + '_tooltipTemplate';\n            updateBlazorTemplate(templateId, 'TooltipTemplate', this.parent.eventSettings);\n        }\n    };\n    EventTooltip.prototype.onBeforeClose = function () {\n        if (isBlazor() && this.parent.group.headerTooltipTemplate) {\n            var templateId = this.parent.element.id + '_headerTooltipTemplate';\n            resetBlazorTemplate(templateId, 'HeaderTooltipTemplate');\n        }\n        if (isBlazor() && this.parent.eventSettings.tooltipTemplate) {\n            var templateId = this.parent.element.id + '_tooltipTemplate';\n            resetBlazorTemplate(templateId, 'TooltipTemplate');\n        }\n        this.parent.resetTemplates();\n    };\n    // tslint:disable-next-line:max-func-body-length\n    EventTooltip.prototype.onBeforeRender = function (args) {\n        if (!isNullOrUndefined(args.target.getAttribute('data-tooltip-id'))) {\n            return;\n        }\n        if (args.target.classList.contains(cls.RESOURCE_CELLS_CLASS) && this.parent.activeViewOptions.group.resources.length > 0) {\n            var resCollection = void 0;\n            if (this.parent.activeView.isTimelineView()) {\n                var index = parseInt(args.target.getAttribute('data-group-index'), 0);\n                resCollection = this.parent.resourceBase.lastResourceLevel[index];\n            }\n            else {\n                var rowIndex = args.target.parentNode.sectionRowIndex;\n                var cellIndex = args.target.cellIndex;\n                resCollection = this.parent.activeView.getColumnLevels()[rowIndex][cellIndex];\n            }\n            var data = {\n                resource: resCollection.resource,\n                resourceData: resCollection.resourceData\n            };\n            var contentContainer = createElement('div');\n            var templateId = this.parent.element.id + '_headerTooltipTemplate';\n            var tooltipTemplate = [].slice.call(this.parent.getHeaderTooltipTemplate()(data, this.parent, 'headerTooltipTemplate', templateId, false));\n            append(tooltipTemplate, contentContainer);\n            this.setContent(contentContainer);\n            return;\n        }\n        var record = this.parent.eventBase.getEventByGuid(args.target.getAttribute('data-guid'));\n        if (!isNullOrUndefined(this.parent.eventSettings.tooltipTemplate)) {\n            var contentContainer = createElement('div');\n            var templateId = this.parent.element.id + '_tooltipTemplate';\n            var templateArgs = util.addLocalOffsetToEvent(record, this.parent.eventFields);\n            var tooltipTemplate = [].slice.call(this.parent.getEventTooltipTemplate()(templateArgs, this.parent, 'tooltipTemplate', templateId, false));\n            append(tooltipTemplate, contentContainer);\n            this.setContent(contentContainer);\n        }\n        else {\n            var globalize = this.parent.globalize;\n            var fields = this.parent.eventFields;\n            var eventStart = new Date('' + record[fields.startTime]);\n            var eventEnd = new Date('' + record[fields.endTime]);\n            eventEnd = (eventEnd.getHours() === 0 && eventEnd.getMinutes() === 0) ? new Date(eventEnd.setMilliseconds(-1000)) : eventEnd;\n            var startDate = util.resetTime(new Date('' + eventStart));\n            var endDate = util.resetTime(new Date('' + eventEnd));\n            var tooltipSubject = (record[fields.subject] || this.parent.eventSettings.fields.subject.default);\n            var tooltipLocation = !isNullOrUndefined(record[fields.location]) ? record[fields.location] : '';\n            var startMonthDate = '';\n            var startMonthYearDate = '';\n            var endMonthYearDate = '';\n            if (isBlazor()) {\n                startMonthDate = globalize.formatDate(eventStart, {\n                    type: 'date', format: 'MMM d', calendar: this.parent.getCalendarMode()\n                });\n                startMonthYearDate = globalize.formatDate(eventStart, {\n                    type: 'date', format: 'MMMM d, y', calendar: this.parent.getCalendarMode()\n                });\n                endMonthYearDate = globalize.formatDate(eventEnd, {\n                    type: 'date', format: 'MMMM d, y', calendar: this.parent.getCalendarMode()\n                });\n            }\n            else {\n                startMonthDate = globalize.formatDate(eventStart, {\n                    type: 'date', skeleton: 'MMMd', calendar: this.parent.getCalendarMode()\n                });\n                startMonthYearDate = globalize.formatDate(eventStart, {\n                    type: 'date', skeleton: 'medium', calendar: this.parent.getCalendarMode()\n                });\n                endMonthYearDate = globalize.formatDate(eventEnd, {\n                    type: 'date', skeleton: 'medium', calendar: this.parent.getCalendarMode()\n                });\n            }\n            startMonthDate = util.capitalizeFirstWord(startMonthDate, 'single');\n            startMonthYearDate = util.capitalizeFirstWord(startMonthYearDate, 'single');\n            endMonthYearDate = util.capitalizeFirstWord(endMonthYearDate, 'single');\n            var skeleton = isBlazor() ? 't' : 'short';\n            var startTime = globalize.formatDate(eventStart, {\n                type: 'time', skeleton: skeleton, calendar: this.parent.getCalendarMode()\n            });\n            var endTime = globalize.formatDate(eventEnd, {\n                type: 'time', skeleton: skeleton, calendar: this.parent.getCalendarMode()\n            });\n            var tooltipDetails = void 0;\n            if (startDate.getTime() === endDate.getTime()) {\n                tooltipDetails = isBlazor() ?\n                    globalize.formatDate(eventStart, {\n                        type: 'date', format: 'MMMM d, y', calendar: this.parent.getCalendarMode()\n                    }) :\n                    globalize.formatDate(eventStart, {\n                        type: 'date', skeleton: 'long', calendar: this.parent.getCalendarMode()\n                    });\n                tooltipDetails = util.capitalizeFirstWord(tooltipDetails, 'single');\n            }\n            else {\n                tooltipDetails = (startDate.getFullYear() === endDate.getFullYear()) ? (startMonthDate + ' - ' + endMonthYearDate) :\n                    (startMonthYearDate + ' - ' + endMonthYearDate);\n            }\n            var tooltipTime = (record[fields.isAllDay]) ? this.parent.localeObj.getConstant('allDay') :\n                (startTime + ' - ' + endTime);\n            var content = '<div><div class=\"e-subject\">' + tooltipSubject + '</div>' +\n                '<div class=\"e-location\">' + tooltipLocation + '</div>' +\n                '<div class=\"e-details\">' + tooltipDetails + '</div>' +\n                '<div class=\"e-all-day\">' + tooltipTime + '</div></div>';\n            this.setContent(content);\n        }\n        this.parent.renderTemplates();\n    };\n    EventTooltip.prototype.setContent = function (content) {\n        this.tooltipObj.setProperties({ content: content }, true);\n    };\n    EventTooltip.prototype.close = function () {\n        this.tooltipObj.close();\n    };\n    /**\n     * To destroy the event tooltip.\n     * @return {void}\n     * @private\n     */\n    EventTooltip.prototype.destroy = function () {\n        this.tooltipObj.destroy();\n        addClass([this.parent.element], 'e-control');\n        this.tooltipObj = null;\n    };\n    return EventTooltip;\n}());\nexport { EventTooltip };\n"]},"metadata":{},"sourceType":"module"}